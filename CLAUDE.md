âœ… Electron + FFmpeg ã«ã‚ˆã‚‹ Appleã‚·ãƒªã‚³ãƒ³æœ€é©åŒ– å‹•ç”»ç·¨é›†GUIã‚¢ãƒ—ãƒªï¼šä»•æ§˜æ›¸

â¸»

â–  æ¦‚è¦

ã“ã®ã‚¢ãƒ—ãƒªã¯ã€Electron + FFmpeg ã‚’ãƒ™ãƒ¼ã‚¹ã«æ§‹ç¯‰ã™ã‚‹ã€Appleã‚·ãƒªã‚³ãƒ³ï¼ˆM1/M2/M3ï¼‰å‘ã‘æœ€é©åŒ–æ¸ˆã¿ã®ç›´æ„Ÿçš„ãªå‹•ç”»ç·¨é›†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
	â€¢	ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹ã®ç›´æ„Ÿçš„ãªã‚¯ãƒªãƒƒãƒ—æ“ä½œ
	â€¢	éŸ³å£°æ³¢å½¢ã«ã‚ˆã‚‹é«˜ç²¾åº¦ãªãƒˆãƒªãƒŸãƒ³ã‚°
	â€¢	ãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ–ï¼ˆ-14 LUFSï¼‰
	â€¢	éŸ³å£°ã®ã‚¯ãƒ­ã‚¹ãƒ•ã‚§ãƒ¼ãƒ‰çµåˆ
	â€¢	ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æ”¯æ´ã«ã‚ˆã‚‹é«˜é€Ÿæ›¸ãå‡ºã—
	â€¢	æœ€çµ‚çš„ã«å…¨ã¦ã®å‹•ç”»ã‚’ä¸€ã¤ã®å‹•ç”»ã«æ›¸ãå‡ºã—
	â€¢	æ›¸ãå‡ºã—å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼šH.264 / H.265 / ProRes HQ

â¸»

â–  UIæ§‹æˆï¼ˆ4ã‚¨ãƒªã‚¢ï¼‰

â€‹æ·»ä»˜å†™çœŸã‚’å‚ç…§

â¸»

â–  ä¸»ãªæ©Ÿèƒ½

ğŸï¸ ç´ æç®¡ç†
	â€¢	ãƒ•ã‚©ãƒ«ãƒ€ãƒ»è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ— or é¸æŠè¿½åŠ 
	â€¢	å¯¾å¿œå½¢å¼ï¼šå‹•ç”»ï¼ˆ.mp4, .mov, .aviâ€¦ï¼‰ãƒ»é™æ­¢ç”»ï¼ˆ.jpg, .pngâ€¦ï¼‰
	â€¢	é™æ­¢ç”»ã¯è‡ªå‹•ã§5ç§’å‹•ç”»åŒ–ï¼ˆã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒã§é»’èƒŒæ™¯ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ï¼‰
	â€¢	æ’®å½±æ—¥æ™‚ã§ã‚½ãƒ¼ãƒˆã—ã¦ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æœ«å°¾ã«è‡ªå‹•è¿½åŠ 

ğŸ”Š ãƒˆãƒªãƒŸãƒ³ã‚°æ©Ÿèƒ½
	â€¢	æ³¢å½¢ã¯FFmpegã§RAW PCMå‡ºåŠ› â†’ Canvasã«Int16Arrayã§æç”»
	â€¢	ãƒã‚¦ã‚¹æ“ä½œã§ãƒˆãƒªãƒ ç¯„å›²ã‚’æŒ‡å®šãƒ»å‰Šé™¤ãƒ»è¤‡æ•°ç®¡ç†
	â€¢	ã‚·ãƒ¼ã‚¯ãƒãƒ¼ã¨æ³¢å½¢ã‚«ãƒ¼ã‚½ãƒ«ã¯åŒæœŸ
	â€¢	æ³¢å½¢ã‹ã‚‰ä¸è¦ãªç™ºè©±ã‚„ç„¡éŸ³åŒºé–“ã‚’è¦–è¦šçš„ã«è¦‹ã¤ã‘ã‚„ã™ã„

ğŸ“ ãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ–ï¼ˆYouTubeåŸºæº–ï¼‰
	â€¢	loudnorm ãƒ•ã‚£ãƒ«ã‚¿ã§ITU-R BS.1770-3æº–æ‹ ã®-14 LUFSã«æ­£è¦åŒ–

ğŸ”„ ã‚¯ãƒ­ã‚¹ãƒ•ã‚§ãƒ¼ãƒ‰çµåˆ
	â€¢	acrossfadeï¼ˆéŸ³å£°ï¼‰/ xfadeï¼ˆæ˜ åƒï¼‰ã§0.5ç§’ã®ã‚¹ãƒ ãƒ¼ã‚ºãªç¹‹ã
	â€¢	ãƒã‚¤ã‚ºé˜²æ­¢ãƒ»è‡ªç„¶ãªã¤ãªãŒã‚Šã®å®Ÿç¾

ğŸ§  ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†
	â€¢	æ³¢å½¢ç”Ÿæˆ / ãƒ©ã‚¦ãƒ‰ãƒã‚¹è§£æ / é™æ­¢ç”»å¤‰æ›ãªã©ã¯éåŒæœŸå®Ÿè¡Œ
	â€¢	ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã€Œå‡¦ç†ä¸­ï¼šXä»¶ã€
	â€¢	æ›¸ãå‡ºã—ã¯ã™ã¹ã¦ã®å‡¦ç†å®Œäº†å¾Œã§ãªã‘ã‚Œã°å®Ÿè¡Œä¸å¯

ğŸ“¤ æ›¸ãå‡ºã—ï¼ˆä¸­é–“å¤‰æ› + çµåˆï¼‰
	â€¢	å‡ºåŠ›è¨­å®šï¼šè§£åƒåº¦ï¼ˆ720p/1080p/2K/4Kï¼‰ã€fpsï¼ˆ24/30/60ï¼‰ã€ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ï¼ˆH.264/H.265/ProRes HQï¼‰
	â€¢	ã‚¹ãƒ†ãƒƒãƒ—1ï¼šã‚¯ãƒªãƒƒãƒ—ã”ã¨ã«ä¸­é–“ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆçµ±ä¸€ä»•æ§˜ï¼‰
	â€¢	ã‚¹ãƒ†ãƒƒãƒ—2ï¼šconcat ãƒ¢ãƒ¼ãƒ‰ã§æœ€çµ‚çµåˆï¼ˆ-c copyã§é«˜é€Ÿï¼‰

â¸»

â–  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

æ©Ÿèƒ½	ä½¿ç”¨æŠ€è¡“
UI	Electron + HTML/CSS/JSï¼ˆReactï¼‰
å‹•ç”»å‡¦ç†	FFmpegï¼ˆffmpeg-staticï¼‰
ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰	VideoToolboxï¼ˆHWæ”¯æ´ï¼‰ + ProRes
æ³¢å½¢æç”»	PCMï¼ˆs16leï¼‰ â†’ Int16Array â†’ Canvas
ã‚¿ã‚¹ã‚¯ç®¡ç†	Node.jséåŒæœŸ + ãƒ•ãƒ­ãƒ³ãƒˆåŒæœŸé€šçŸ¥
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰	ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ + Express + Axios

â¸»

â–  ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
swp1/
â”œâ”€â”€ package.json           # ä¾å­˜é–¢ä¿‚ã¨è¨­å®š
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/              # ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹
â”‚   â”‚   â”œâ”€â”€ main.js        # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ preload.js     # ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã¨ã®IPCé€šä¿¡æ©‹æ¸¡ã—å½¹
â”‚   â”‚   â”œâ”€â”€ ffmpeg-service-manager.js  # FFmpegã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†
â”‚   â”‚   â””â”€â”€ ffmpeg-service.js          # FFmpegãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â””â”€â”€ renderer/          # ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹
â”‚       â”œâ”€â”€ index.html     # ãƒ¡ã‚¤ãƒ³HTML
â”‚       â””â”€â”€ react/         # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚           â”œâ”€â”€ App.tsx    # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚           â”œâ”€â”€ components/
â”‚           â”‚   â”œâ”€â”€ MediaPane.tsx      # ãƒ¡ãƒ‡ã‚£ã‚¢ãƒªã‚¹ãƒˆ
â”‚           â”‚   â”œâ”€â”€ PlayerPane.tsx     # ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼
â”‚           â”‚   â”œâ”€â”€ TimelinePane.tsx   # ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
â”‚           â”‚   â”œâ”€â”€ TrimPane.tsx       # ãƒˆãƒªãƒŸãƒ³ã‚°/æ³¢å½¢
â”‚           â”‚   â””â”€â”€ ExportPane.tsx     # æ›¸ãå‡ºã—è¨­å®š
â”‚           â””â”€â”€ types/     # å‹å®šç¾©
â””â”€â”€ dist/                  # ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã‚¢ãƒ—ãƒª
```

â¸»

â–  ã‚¢ãƒ—ãƒªã®èµ·å‹•æ–¹æ³•

**é–‹ç™ºãƒ¢ãƒ¼ãƒ‰**
```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ã®å®Ÿè¡Œ
npm start
```

**ãƒ“ãƒ«ãƒ‰**
```bash
# macOSå‘ã‘ãƒ“ãƒ«ãƒ‰
npm run build:mac
```

â¸»

ğŸ§© é–‹ç™ºæ–¹é‡ï¼šæ®µéšçš„é–‹ç™ºï¼ˆã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

âœ… ãƒ•ã‚§ãƒ¼ã‚º1ï¼šåŸºç›¤æ§‹ç¯‰
	â€¢	Electronç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
	â€¢	Electronã‹ã‚‰ffmpegãŒå‘¼ã³å‡ºã›ã‚‹ã“ã¨ã‚’ç¢ºèª
	â€¢	å‹•ç”»å†ç”Ÿ / ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ / ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º
	â€¢	æ³¢å½¢æŠ½å‡º + Canvasæç”»ã®ãƒ™ãƒ¼ã‚¹

âœ… ãƒ•ã‚§ãƒ¼ã‚º2ï¼šç·¨é›†æ©Ÿèƒ½
	â€¢	ãƒˆãƒªãƒ ç¯„å›²ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
	â€¢	éŸ³å£°ã‚¯ãƒ­ã‚¹ãƒ•ã‚§ãƒ¼ãƒ‰ã€ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³UIæ“ä½œ
	â€¢	è¤‡æ•°ã‚¯ãƒªãƒƒãƒ—é€£çµã€å†ç”Ÿã¨ã®é€£å‹•ç¢ºèª

âœ… ãƒ•ã‚§ãƒ¼ã‚º3ï¼šå‡¦ç†æ©Ÿèƒ½ã®çµ±åˆ
	â€¢	ãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ–ï¼ˆloudnormï¼‰
	â€¢	æ›¸ãå‡ºã—è¨­å®šUIï¼ˆè§£åƒåº¦ / fps / ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ï¼‰
	â€¢	ä¸­é–“å¤‰æ›å‡¦ç† / concatçµåˆå‡¦ç†

âœ… ãƒ•ã‚§ãƒ¼ã‚º4ï¼šUI/UXå¼·åŒ–
	â€¢	ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿
	â€¢	æ›¸ãå‡ºã—æ¡ä»¶ç®¡ç†ï¼ˆå‡¦ç†ä¸­ã¯ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–ï¼‰
	â€¢	å‡¦ç†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å¯è¦–åŒ–ã¨ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½

â¸»

ğŸ§  é–‹ç™ºã®ãƒã‚¤ãƒ³ãƒˆ
	â€¢	ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¸¸ã«ã€Œã„ã¾ä½•ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã€ã‚’æŠŠæ¡ã§ãã‚‹UI
	â€¢	ç·¨é›†ä¸­ã‚‚ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†ãŒä¸¦è¡Œå®Ÿè¡Œå¯èƒ½
	â€¢	æ›¸ãå‡ºã—ã¯ã€Œæœ€çµ‚å‡¦ç†ã€ã¨ã—ã¦ä½ç½®ã¥ã‘ã€ã™ã¹ã¦ã®æ•´åˆæ€§ã‚’å–ã‚‹
	â€¢	Macã§ã®é«˜é€ŸåŒ–ã‚’è€ƒæ…®ã—ã€å¯èƒ½ãªé™ã‚ŠVideoToolboxã§å‡¦ç†

â¸»

ğŸ“ é€²æ—å ±å‘Š (2025-03-30)

âœ… ãƒ•ã‚§ãƒ¼ã‚º1ã®åŸºç›¤æ§‹ç¯‰å®Œäº†
- Electronã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬æ§‹é€ ã‚’è¨­å®š
- FFmpegã¨ã®é€£æºã‚’ç¢ºèª
- ä¸»è¦ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…:
  - ç´ æãƒªã‚¹ãƒˆ
  - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼
  - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
  - æ³¢å½¢è¡¨ç¤º
  - ãƒˆãƒªãƒŸãƒ³ã‚°æ©Ÿèƒ½ã®UI
  - æ›¸ãå‡ºã—è¨­å®šUI

âœ… ãƒ•ã‚§ãƒ¼ã‚º2&3ã®ä¸€éƒ¨å®Ÿè£…å®Œäº†
- å‹•ç”»ã®èª­ã¿è¾¼ã¿æ©Ÿèƒ½
- æ³¢å½¢æŠ½å‡ºã¨Canvasæç”»ã®åŸºæœ¬å®Ÿè£…
- ãƒˆãƒªãƒŸãƒ³ã‚°ç¯„å›²ã®æŒ‡å®šã¨ä¿å­˜
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§ã®ã‚¯ãƒªãƒƒãƒ—ç®¡ç†
- åŸºæœ¬çš„ãªæ›¸ãå‡ºã—æ©Ÿèƒ½

âœ… ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒšã‚¤ãƒ³ã®å®Œæˆï¼ˆ2025-03-31ï¼‰
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹ã®ã‚¯ãƒªãƒƒãƒ—æ“ä½œæ©Ÿèƒ½ã‚’å®Ÿè£…å®Œäº†
- æ³¢å½¢è¡¨ç¤ºã¨ãƒˆãƒªãƒŸãƒ³ã‚°æ©Ÿèƒ½ã®çµ±åˆ
- è¤‡æ•°ã‚¯ãƒªãƒƒãƒ—ã®ç®¡ç†ã¨æ“ä½œ
- ã‚·ãƒ¼ã‚¯ãƒãƒ¼ã¨æ³¢å½¢ã‚«ãƒ¼ã‚½ãƒ«ã®åŒæœŸ
- ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã«ã‚ˆã‚‹ã‚¯ãƒªãƒƒãƒ—é…ç½®
- ã‚¯ãƒªãƒƒãƒ—é–“ã®æ™‚é–“èª¿æ•´æ©Ÿèƒ½
- ä»¥å¾Œã®ã‚³ãƒ¼ãƒ‰æ”¹å¤‰ã¯æ…é‡ã«è¡Œã„ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒšã‚¤ãƒ³ã®ãƒ‡ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’é˜²ã

âœ… ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆæ©Ÿèƒ½ã®ä¿®æ­£ï¼ˆ2025-04-02ï¼‰
- ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ•ãƒ­ãƒ¼ã®ä¿®æ­£ã«ã‚ˆã‚Šã€ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§ã®ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤ºæ©Ÿèƒ½ã‚’æ”¹å–„
- thumbnail-generatedã‚¤ãƒ™ãƒ³ãƒˆã‚’æ´»ç”¨ã—ãŸéåŒæœŸé€šçŸ¥ã®å®Ÿè£…
- Electronã®IPCé€šä¿¡ã«ãŠã‘ã‚‹é‡è¦ãªä¿®æ­£:
  - preload.jsã§ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”ŸæˆAPIã®å…¬é–‹
  - main.jsã§ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆé–¢æ•°ã®å¼·åŒ–
  - è¤‡æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å½¢å¼ã«å¯¾å¿œã™ã‚‹APIã®æŸ”è»Ÿãªè¨­è¨ˆ

- **ä¿®æ­£å†…å®¹ã®è©³ç´°**:
  1. **ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å¼·åŒ–**:
     - `generateThumbnail`é–¢æ•°ã‚’ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã«å…¬é–‹ã™ã‚‹ã‚ˆã†`preload.js`ã‚’ä¿®æ­£
     - è¨±å¯ã•ã‚ŒãŸIPCãƒãƒ£ãƒ³ãƒãƒ«ãƒªã‚¹ãƒˆã«`generate-thumbnail`ã‚’è¿½åŠ 
     - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã¨å€‹åˆ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å½¢å¼ã®ä¸¡æ–¹ã«å¯¾å¿œã§ãã‚‹ã‚ˆã†æŸ”è»Ÿãªå®Ÿè£…ã‚’è¿½åŠ 
     ```javascript
     generateThumbnail: (pathOrOptions, fileId) => {
       if (typeof pathOrOptions === 'string') {
         // å€‹åˆ¥ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦å‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆ
         return ipcRenderer.invoke('generate-thumbnail', { 
           filePath: pathOrOptions, 
           fileId: fileId 
         });
       } else {
         // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆ
         return ipcRenderer.invoke('generate-thumbnail', pathOrOptions);
       }
     }
     ```

  2. **App.tsxã®æ”¹å–„**:
     - ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’è¿½åŠ ã—ã¦ã€ã‚³ãƒ¼ãƒ‰é‡è¤‡ã‚’å‰Šæ¸›
     - ãƒ¡ãƒ‡ã‚£ã‚¢ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ãƒ‰æ™‚ã«è‡ªå‹•çš„ã«ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã‚’è¦æ±‚ã™ã‚‹useEffectã‚’å®Ÿè£…
     - æ˜ç¤ºçš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨å‹ãƒã‚§ãƒƒã‚¯ã®è¿½åŠ 

  3. **TimelinePaneã®ãƒ‡ãƒãƒƒã‚°å¼·åŒ–**:
     - ã‚µãƒ ãƒã‚¤ãƒ«å—ä¿¡ãƒ»è¡¨ç¤ºãƒ—ãƒ­ã‚»ã‚¹ã«ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’è¿½åŠ 
     - ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ç¢ºå®ŸãªåˆæœŸåŒ–ã¨è§£é™¤ã‚’ç¢ºèª

- **æ•™è¨“**:
  1. **Electron IPCã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³**:
     - ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆpreload.jsï¼‰ã¯ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã¨ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã®ã€Œæ©‹æ¸¡ã—ã€å½¹ã§ã‚ã‚Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰æ˜ç¤ºçš„ãªè¨­å®šãŒå¿…è¦
     - æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹éš›ã¯ã€preload.jsã§ã®å…¬é–‹ã¨è¨±å¯ãƒªã‚¹ãƒˆã¸ã®è¿½åŠ ã‚’å¿˜ã‚Œãªã„ã“ã¨
     - APIè¨­è¨ˆæ™‚ã«ã¯ã€å‘¼ã³å‡ºã—å´ã®åˆ©ä¾¿æ€§ã¨å‹å®‰å…¨æ€§ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®ã™ã‚‹

  2. **ãƒ‡ãƒãƒƒã‚°ã®é‡è¦æ€§ã¨æ‰‹æ³•**:
     - è¤‡é›‘ãªãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ã§ã¯ã€å„æ®µéšã§ã®ãƒ­ã‚®ãƒ³ã‚°ãŒå•é¡Œç‰¹å®šã«ä¸å¯æ¬ 
     - ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’è¿½è·¡ã§ãã‚‹ã‚ˆã†ã€ãƒ­ã‚°ãƒã‚¤ãƒ³ãƒˆã‚’æˆ¦ç•¥çš„ã«é…ç½®ã™ã‚‹
     - å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã¨å†…å®¹ã‚’å¸¸ã«æ¤œè¨¼ã—ã€æƒ³å®šé€šã‚Šã‹ç¢ºèªã™ã‚‹

  3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¾¹åº•**:
     - æ¡ä»¶ä»˜ããƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã€ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã‚„çŠ¶æ…‹ã«å¯¾ã™ã‚‹å …ç‰¢æ€§ã‚’ç¢ºä¿
     - ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦è©³ç´°ã‚’è¨˜éŒ²ã—ã€ãƒ‡ãƒãƒƒã‚°ã‚’å®¹æ˜“ã«ã™ã‚‹
     - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã‚ãªã„ã‚ˆã†ã€ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã‚‚å¯èƒ½ãªé™ã‚Šæ©Ÿèƒ½ã‚’ç¶­æŒã™ã‚‹

- TimelinePaneã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ©Ÿèƒ½å¼·åŒ–:
  - ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ã®å®Ÿè£…:
    ```typescript
    const handleDrop = async (e: DragEvent) => {
      e.preventDefault();
      e.stopPropagation();
      setIsDragging(false);
      
      // ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‰ãƒ­ãƒƒãƒ—å‡¦ç†
      if (e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files.length > 0) {
        const filePaths: string[] = [];
        for (let i = 0; i < e.dataTransfer.files.length; i++) {
          const file = e.dataTransfer.files[i] as ElectronFile;
          if (file.path) {
            filePaths.push(file.path);
          }
        }
        
        // ãƒ‰ãƒ­ãƒƒãƒ—ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ç›´æ¥å‡¦ç†
        if (filePaths.length > 0 && onDropFiles) {
          await onDropFiles(filePaths);
        }
      }
    };
    ```
  - ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤ºã¨ãƒ©ã‚¦ãƒ‰ãƒã‚¹æ¸¬å®šã®é€£æº
  - ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚µãƒ ãƒã‚¤ãƒ«æ›´æ–°ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
  - è©³ç´°ãªãƒ‡ãƒãƒƒã‚°ãƒ­ã‚®ãƒ³ã‚°ã®å®Ÿè£…
  
- é–‹ç™ºæ™‚ã®æ•™è¨“:
  - Electronã‚¢ãƒ—ãƒªã«ãŠã‘ã‚‹ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®é‡è¦æ€§
  - IPCé€šä¿¡ã®è¨­è¨ˆã¨ãƒ‡ãƒãƒƒã‚°æ‰‹æ³•
  - ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã¨ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹é–“ã®ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

âœ… IPCé€šä¿¡ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆ2025-04-06ï¼‰
- Electronã¨FFmpegé–“ã®é€šä¿¡ã‚’æ”¹å–„ã—ã€ã‚ˆã‚Šä¿¡é ¼æ€§ã®é«˜ã„æ§‹é€ ã«ä¿®æ­£:
  1. **ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å°å…¥**:
     - `ffmpeg-service.js`: FFmpegã‚’Expressãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè£…
     - RESTful APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§FFmpegã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†ï¼ˆ/process, /status/:taskId, /healthï¼‰
     - ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã«ã‚ˆã‚‹è¤‡æ•°FFmpegã‚¿ã‚¹ã‚¯ã®é †æ¬¡å‡¦ç†
  
  2. **FFmpegã‚µãƒ¼ãƒ“ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®å®Ÿè£…**:
     - `ffmpeg-service-manager.js`: FFmpegã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
     - ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•ã€åœæ­¢ã€ç›£è¦–æ©Ÿèƒ½
     - Axios APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€šä¿¡
  
  3. **IPCé€šä¿¡ã®æ”¹å–„**:
     - `main.js`ã®æ›´æ–°: FFmpegã‚µãƒ¼ãƒ“ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã®çµ±åˆ
     - FFmpegãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªã€ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ç¢ºèªã€ã‚¿ã‚¹ã‚¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç”¨ã®IPCé€šä¿¡ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
     - é€²æ—ç›£è¦–ã¨ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã¸ã®æ›´æ–°é€šçŸ¥
  
  4. **preload.jsã®æ›´æ–°**:
     - FFmpegã‚¿ã‚¹ã‚¯ç®¡ç†ã®ãŸã‚ã®æ–°ã—ã„APIå…¬é–‹
     - ã‚¿ã‚¹ã‚¯çŠ¶æ…‹å–å¾—ã¨ã‚¿ã‚¹ã‚¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½ã®è¿½åŠ 
  
  5. **FFprobeã‚³ãƒãƒ³ãƒ‰ã®æœ€é©åŒ–**:
     - `runFFprobeCommand`é–¢æ•°ã®æ”¹å–„: ç›´æ¥å®Ÿè¡Œæ–¹å¼ã«ã‚ˆã‚‹ä¿¡é ¼æ€§å‘ä¸Š
     - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ç²¾åº¦å‘ä¸Šã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
  
  6. **æ³¢å½¢è¡¨ç¤ºæ©Ÿèƒ½ã®ä¿®æ­£**:
     - `generate-waveform`ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®æ”¹å–„: ç›´æ¥FFmpegãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œæ–¹å¼ã¸ã®å¤‰æ›´
     - ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–
     - ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ã®æ”¹å–„ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–
     - è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›ã«ã‚ˆã‚‹ãƒ‡ãƒãƒƒã‚°æ€§ã®å‘ä¸Š

- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®æˆæœ**:
  1. **å®‰å®šæ€§ã®å‘ä¸Š**:
     - ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ã«ã‚ˆã‚‹å½±éŸ¿ç¯„å›²ã®å±€æ‰€åŒ–
     - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã‚‚ä»–ã®æ©Ÿèƒ½ã«å½±éŸ¿ãŒæ³¢åŠã—ãªã„æ§‹é€ 
  
  2. **ãƒ‡ãƒãƒƒã‚°ã®å®¹æ˜“ã•**:
     - è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›ã«ã‚ˆã‚‹å•é¡Œç‰¹å®šã®è¿…é€ŸåŒ–
     - æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æä¾›
  
  3. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Š**:
     - è¤‡æ•°ã®FFmpegã‚¿ã‚¹ã‚¯ã‚’é †æ¬¡å‡¦ç†ã§ãã‚‹æ§‹é€ 
     - å°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µã«å¯¾å¿œã—ã‚„ã™ã„è¨­è¨ˆ

- **æŠ€è¡“çš„ãªãƒã‚¤ãƒ³ãƒˆ**:
  1. **Expressã‚µãƒ¼ãƒãƒ¼ã®æ´»ç”¨**:
     ```javascript
     // RESTful APIè¨­è¨ˆ
     app.post('/process', async (req, res) => {
       const { command, taskId } = req.body;
       // ã‚¿ã‚¹ã‚¯å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯
     });
     
     app.get('/status/:taskId', (req, res) => {
       const { taskId } = req.params;
       // ã‚¿ã‚¹ã‚¯çŠ¶æ…‹å–å¾—ãƒ­ã‚¸ãƒƒã‚¯
     });
     
     app.get('/health', (req, res) => {
       // ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯
     });
     ```
  
  2. **ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **:
     ```javascript
     // ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ç®¡ç†
     const taskQueue = [];
     const activeTasks = {};
     
     function processNextTask() {
       if (taskQueue.length === 0 || isProcessing) return;
       
       isProcessing = true;
       const nextTask = taskQueue.shift();
       // ã‚¿ã‚¹ã‚¯å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯
     }
     ```
  
  3. **æ³¢å½¢ç”Ÿæˆã®æ”¹å–„**:
     ```javascript
     // ç›´æ¥ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œã«ã‚ˆã‚‹æ³¢å½¢ç”Ÿæˆ
     const process = spawn(ffmpegPath, [
       '-i', filePath,
       '-f', 's16le',
       '-acodec', 'pcm_s16le',
       '-ac', '1',
       '-ar', '44100',
       pcmOutputPath
     ]);
     ```

ğŸ“‹ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— (ãƒ•ã‚§ãƒ¼ã‚º3&4ã®æ®‹ã‚Šå®Ÿè£…)
- ãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ–æ©Ÿèƒ½ã®å®Ÿè£…
- ã‚¯ãƒ­ã‚¹ãƒ•ã‚§ãƒ¼ãƒ‰çµåˆæ©Ÿèƒ½ã®å®Ÿè£…
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‹ã‚‰é¸æŠã—ãŸç¯„å›²ã®ã¿ã‚’æ›¸ãå‡ºã™æ©Ÿèƒ½
- æ›¸ãå‡ºã—æ¡ä»¶ç®¡ç†ã®å¼·åŒ–
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã®å®Ÿè£…

â¸»

â–  ãã®ä»–ã®æƒ…å ±

**é–‹ç™ºç’°å¢ƒ**
- Node.js: 18.x
- Electron: 27.x
- React: 18.x
- TypeScript: 5.x
- FFmpeg: 7.1.1

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³**
```
[ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹] <--IPC--> [ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹] <--HTTP--> [FFmpegã‚µãƒ¼ãƒ“ã‚¹]
    (React UI)                (Electron)                (Express)
```

**ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰ã®APIå‘¼ã³å‡ºã—ä¾‹**
```javascript
// ãƒˆãƒªãƒŸãƒ³ã‚°ãƒ“ãƒ¥ãƒ¼æ³¢å½¢ç”Ÿæˆ
const waveformResult = await window.api.generateWaveform(selectedMedia.path);
if (waveformResult.success) {
  setWaveformData(waveformResult.waveform);
}

// FFmpegã‚¿ã‚¹ã‚¯é€²æ—ç›£è¦–
window.api.on('ffmpeg-task-progress', (progress) => {
  updateProgressIndicator(progress);
});
```
